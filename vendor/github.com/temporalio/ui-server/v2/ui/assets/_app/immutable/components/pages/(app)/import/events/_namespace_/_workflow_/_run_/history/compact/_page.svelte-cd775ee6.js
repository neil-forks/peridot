import{S as G,i as C,s as F,w as $,x as h,y as d,f as c,t as p,z as v,J as _,Y as N,e as g,b as I,g as y,ac as q,d as b,h as P,ad as z}from"../../../../../../../../../../chunks/index-b87195f7.js";import{p as J}from"../../../../../../../../../../chunks/stores-450871c1.js";import{a as M}from"../../../../../../../../../../chunks/import-events-04bafb9c.js";import{E as Y,a as j,b as x}from"../../../../../../../../../../chunks/event-empty-row-fdbf5c41.js";import{P as B}from"../../../../../../../../../../chunks/pagination-b084e85a.js";import{b as w,e as D}from"../../../../../../../../../../chunks/event-view-e18ef071.js";function E(i,t,r){const e=i.slice();return e[10]=t[r],e}function k(i){let t,r;return t=new j({}),{c(){$(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function A(i,t){let r,e,o;return e=new x({props:{event:t[10],compact:S,expandAll:t[1]==="true",initialItem:t[9],visibleItems:t[8]}}),{key:i,first:null,c(){r=g(),$(e.$$.fragment),this.h()},l(n){r=g(),h(e.$$.fragment,n),this.h()},h(){this.first=r},m(n,f){I(n,r,f),d(e,n,f),o=!0},p(n,f){t=n;const l={};f&256&&(l.event=t[10]),f&2&&(l.expandAll=t[1]==="true"),f&512&&(l.initialItem=t[9]),f&256&&(l.visibleItems=t[8]),e.$set(l)},i(n){o||(c(e.$$.fragment,n),o=!0)},o(n){p(e.$$.fragment,n),o=!1},d(n){n&&P(r),v(e,n)}}}function H(i){let t=[],r=new Map,e,o,n=i[8];const f=a=>`${a[10].id}-${a[10].timestamp}`;for(let a=0;a<n.length;a+=1){let s=E(i,n,a),m=f(s);r.set(m,t[a]=A(m,s))}let l=null;return n.length||(l=k()),{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=g(),l&&l.c()},l(a){for(let s=0;s<t.length;s+=1)t[s].l(a);e=g(),l&&l.l(a)},m(a,s){for(let m=0;m<t.length;m+=1)t[m].m(a,s);I(a,e,s),l&&l.m(a,s),o=!0},p(a,s){s&770&&(n=a[8],y(),t=q(t,s,f,1,a,n,r,e.parentNode,z,A,e,E),b(),n.length?l&&(y(),p(l,1,1,()=>{l=null}),b()):l||(l=k(),l.c(),c(l,1),l.m(e.parentNode,e)))},i(a){if(!o){for(let s=0;s<n.length;s+=1)c(t[s]);o=!0}},o(a){for(let s=0;s<t.length;s+=1)p(t[s]);o=!1},d(a){for(let s=0;s<t.length;s+=1)t[s].d(a);a&&P(e),l&&l.d(a)}}}function K(i){let t,r;return t=new Y({props:{compact:S,$$slots:{default:[H]},$$scope:{ctx:i}}}),t.$on("expandAll",i[2]),{c(){$(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},p(e,o){const n={};o&8962&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function L(i){let t,r;return t=new B({props:{items:i[0],floatId:"event-view-toggle","aria-label":"recent events",$$slots:{default:[K,({visibleItems:e,initialItem:o})=>({8:e,9:o}),({visibleItems:e,initialItem:o})=>(e?256:0)|(o?512:0)]},$$scope:{ctx:i}}}),{c(){$(t.$$.fragment)},l(e){h(t.$$.fragment,e)},m(e,o){d(t,e,o),r=!0},p(e,[o]){const n={};o&1&&(n.items=e[0]),o&8962&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){r||(c(t.$$.fragment,e),r=!0)},o(e){p(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}let S=!0;function O(i,t,r){let e,o,n,f,l,a,s;_(i,w,u=>r(1,f=u)),_(i,M,u=>r(5,l=u)),_(i,D,u=>r(6,a=u)),_(i,J,u=>r(7,s=u));function m(u){N(w,f=u.detail.expanded,f)}return i.$$.update=()=>{i.$$.dirty&128&&r(3,e=s.url.searchParams.get("category")),i.$$.dirty&96&&r(4,o=a==="descending"?[...l].reverse():l),i.$$.dirty&24&&r(0,n=o.filter(u=>e?u.category===e:u))},[n,f,m,e,o,l,a,s]}class X extends G{constructor(t){super(),C(this,t,O,L,F,{})}}export{X as default};
